{
    "$schema": "https://railway.app/railway.schema.json",
    "services": {
        "postgres-17-primary": {
            "source": {
                "directory": "postgresql-17-ha"
            },
            "env": {
                "NODE_ROLE": "PRIMARY",
                "PGDATA": "/var/lib/postgresql/data/pgdata"
            }
        },
        "postgres-17-replica": {
            "source": {
                "directory": "postgresql-17-ha"
            },
            "env": {
                "NODE_ROLE": "REPLICA",
                "PGDATA": "/var/lib/postgresql/data/pgdata",
                "PRIMARY_HOST": "${{postgres-17-primary.RAILWAY_PRIVATE_DOMAIN}}"
            }
        },
        "postgres-17-proxy": {
            "source": {
                "directory": "postgresql-17-ha"
            },
            "env": {
                "NODE_ROLE": "PROXY",
                "PRIMARY_HOST": "${{postgres-17-primary.RAILWAY_PRIVATE_DOMAIN}}",
                "REPLICA_HOST": "${{postgres-17-replica.RAILWAY_PRIVATE_DOMAIN}}"
            }
        }
    }
}