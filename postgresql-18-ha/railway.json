{
    "$schema": "https://railway.app/railway.schema.json",
    "services": {
        "postgres-18-primary": {
            "source": {
                "directory": "postgresql-18-ha"
            },
            "env": {
                "NODE_ROLE": "PRIMARY",
                "PGDATA": "/var/lib/postgresql/data/pgdata"
            }
        },
        "postgres-18-replica": {
            "source": {
                "directory": "postgresql-18-ha"
            },
            "env": {
                "NODE_ROLE": "REPLICA",
                "PGDATA": "/var/lib/postgresql/data/pgdata",
                "PRIMARY_HOST": "${{postgres-18-primary.RAILWAY_PRIVATE_DOMAIN}}"
            }
        },
        "postgres-18-proxy": {
            "source": {
                "directory": "postgresql-18-ha"
            },
            "env": {
                "NODE_ROLE": "PROXY",
                "PRIMARY_HOST": "${{postgres-18-primary.RAILWAY_PRIVATE_DOMAIN}}",
                "REPLICA_HOST": "${{postgres-18-replica.RAILWAY_PRIVATE_DOMAIN}}"
            }
        }
    }
}